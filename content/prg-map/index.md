+++
title = "PRG-ROM マップ"
date = 2021-06-13
updated = 2021-06-15
+++

## 概要

|アドレス|種別|内容|
|--|--|--|
|`$8000`|data|文字列 "V4/11A"|
|`$8006`|code|`lda $2007` と等価|
|`$800A`|code|RESET ルーチン|
|`$8088`|data|ソフトリセット判定用 magic 文字列 "NONTAMA."|
|`$8090`|code|ワープ地形に触れたときの処理を行うルーチン|
|`$8106`|code|自機が完全に死んだときの処理を行うルーチン|
|`$8126`|code|現在の面からリスタートするルーチン|
|`$8143`|code|ゲームシーン (デモ)|
|`$8147`|code|ゲームシーン|
|`$81AE`|code|面シーン|
|`$81BC`|code|面シーン 出撃/再出撃処理|
|`$8233`|code|面シーン 道中ループ|
|`$828E`|code|面シーン スターブレイン出現処理|
|`$82CD`|code|面シーン スターブレイン下降中ループ|
|`$830A`|code|面シーン スターブレイン戦ループ|
|`$8345`|code|面シーン スターブレイン撃破時の処理|
|`$83B0`|code|エンディングシーン|
|`$83F3`|code|スターブレイン逃走ルーチン|
|`$8482`|code|ゲームオーバーシーン|
|`$84CD`|code|現在の面の地形関連ポインタおよび地形設定をロードするルーチン|
|`$8506`|code|地形全体を空白セルで埋め、地形処理を無効化するルーチン|
|`$8512`|code|地形全体を空白セルで埋めるルーチン|
|`$8525`|code||
|`$8540`|code|全てのオブジェクトを消すルーチン|
|`$854B`|code|全ての敵弾を消すルーチン|
|`$8556`|code|全ての自弾を消すルーチン|
|`$8561`|code|スコアを 0 に初期化するルーチン|
|`$8569`|code|星のスプライトタイルと座標を初期化するルーチン|
|`$8579`|code||
|`$858B`|code|自機初期化ルーチン|
|`$859E`|data|スターブレイン戦 BGパレット|
|`$85AE`|code|ゲームオーバー判定/処理ルーチン|
|`$85BE`|code|現在の自機パワーに応じてBGMを変更するルーチン|
|`$85CD`|code|`A` で指定された通知を 160F 表示するルーチン|
|`$85D4`|data|エンディング画面 BGデータ (RLE)|
|`$85FC`|code|自機の行動ルーチン (デモからの復帰もここで処理)|
|`$861B`|code||
|`$8638`|code|タイトルシーン (`$B2D0`) へジャンプ|
|`$863B`|code||
|`$86B4`|code||
|`$86CC`|code||
|`$86E2`|code||
|`$86F1`|code||
|`$8706`|code|自機の移動および地形との相互作用ルーチン|
|`$875D`|code|自機と地形との相互作用ルーチン|
|`$87EC`|data|自機パワーに対応する自機スピード|
|`$87F1`|code|自弾の行動ルーチン|
|`$882D`|code|レーザーを消すルーチン|
|`$8832`|code|レーザーの行動ルーチン|
|`$8889`|data|自弾の方向に対応する変位 (dy,dx)|
|`$8897`|code|敵弾の行動ルーチン|
|`$8923`|data|敵弾およびルイドの方向に対応する変位x|
|`$8963`|data|敵弾およびルイドの方向に対応する変位y|
|`$89A3`|code|オブジェクトの行動ルーチン|
|`$89E4`|data|各種オブジェクトに対応する行動ルーチンへのポインタ|
|`$89F6`|code|通常敵の行動ルーチン (通常敵=バイトコードで動く敵)|
|`$8A2B`|code|通常敵の自機追尾/バイトコード実行ルーチン|
|`$8A62`|code|通常敵のバイトコード実行ルーチン|
|`$8A7C`|code|バイトコード `0x00..=0x3F` の処理|
|`$8AD9`|code|通常敵の再行動、および画面外に出たときの消滅処理|
|`$8AFC`|code|バイトコード `0x40` の処理|
|`$8B06`|code|バイトコード `0x41..=0x4F` の処理|
|`$8B12`|code|バイトコード `0x51` の処理|
|`$8B22`|code|バイトコード `0x50`, `0x52..=0x5F` の処理|
|`$8B32`|code|バイトコード `0x60..=0x6F` の処理|
|`$8B4A`|code|バイトコード `0x70..=0x7F` の処理|
|`$8B5A`|code|バイトコード `0x80..=0x8F` の処理|
|`$8B6C`|code|バイトコード `0x90..=0x9F` の処理|
|`$8B8B`|code|バイトコード `0xA0` の処理|
|`$8BA2`|code|バイトコード `0xA1` の処理|
|`$8BB1`|code|バイトコード `0xA2` の処理|
|`$8BBB`|code|バイトコード `0xA3` の処理|
|`$8BC5`|code|バイトコード `0xA4` の処理|
|`$8BD2`|code|バイトコード `0xA5` の処理|
|`$8BF3`|code|バイトコード `0xA6` の処理|
|`$8C14`|code|バイトコード `0xB0..=0xB3` の処理|
|`$8C4E`|code|バイトコード `0xC0..=0xCF` の処理|
|`$8C8F`|code|バイトコード `0xF0` の処理|
|`$8C9D`|code|バイトコード `0xF1..=0xFF` の処理|
|`$8CA2`|code|ルイドの行動ルーチン|
|`$8D76`|code|リュークの行動ルーチン|
|`$8E51`|code|ソープラーの行動ルーチン|
|`$8E8D`|data|ソープラーの変位x|
|`$8E99`|code|スターブレインのコアの行動ルーチン|
|`$8F12`|code|スターブレインの砲台の行動ルーチン|
|`$8F8E`|code|パワーアップアイテムの行動ルーチン|
|`$8FDB`|code|空中物の大爆発オブジェクトの行動ルーチン|
|`$9001`|code|地上物の大爆発オブジェクトの行動ルーチン|
|`$9039`|code|地上物の小爆発オブジェクトの行動ルーチン|
|`$9071`|code|空中物の小爆発オブジェクトの行動ルーチン|
|`$9097`|data|オブジェクトの方向に対応する変位x|
|`$90D7`|data|オブジェクトの方向に対応する変位y|
|`$9117`|code|乱数生成ルーチン|
|`$912A`|code||
|`$`|||
|`$`|||
|`$`|||
|`$`|||
|`$`|||
|`$9520`|code|自機狙い弾生成を試みるルーチン|
|`$9545`|code|自機狙い弾生成ルーチン|
|`$9597`|code|方向指定弾生成を試みるルーチン|
|`$95C2`|code|方向指定弾生成ルーチン|
|`$`|||
|`$`|||
|`$`|||
|`$`|||
|`$`|||
|`$A75C`|code|現在の地形の先頭行をロードするルーチン (NMI から 16F に1回呼ばれる)|
|`$A78D`|code|進行度管理および面の地形の前半/後半切り替えルーチン (NMI から 16F に1回呼ばれる)|
|`$A7E6`|code|現在の面の地形の後半のデータをロードするルーチン|
|`$A7F2`|code|現在の面の地形の前半のデータをロードするルーチン|
|`$A7FC`|code|現在の[地形設定](@/ground-format/index.md#setting)を適用するルーチン|
|`$A83C`|code|PPU へパレットを非同期に転送するルーチン|
|`$A86A`|code|地形の[特殊セル](@/ground-format/index.md#special-cell)をロードするルーチン (NMI から 16F に1回呼ばれる)|
|`$A897`|code|地形の[圧縮データ](@/ground-format/index.md#compression)を展開し、現在の地形の先頭行を更新するルーチン|
|`$A93F`|code|スコア表示スプライト書き込みルーチン|
|`$A98A`|code|自機スプライト書き込みルーチン|
|`$AA26`|code|バリアスプライト書き込みルーチン|
|`$AA3A`|data|バリア位置テーブル (自機に対する相対座標 (dx,dy))|
|`$AA4A`|code|メタスプライト書き込みルーチン|
|`$AAB6`|code|単一スプライト書き込みルーチン|
|`$AAC8`|code|星スプライト書き込みルーチン|
|`$AB1C`|code|星を動かすルーチン|
|`$AB57`|code|面/残機表示スプライト書き込みルーチン|
|`$ABA3`|code|自弾スプライト書き込みルーチン|
|`$ABD9`|code|敵弾スプライト書き込みルーチン (最大4つまで同時表示)|
|`$AC23`|code|オブジェクトスプライト書き込みルーチン|
|`$AC65`|code|通知タイマーをデクリメントし、0 でなければ通知を表示するルーチン|
|`$AC6A`|code|通知表示ルーチン|
|`$AD5E`|data|ボーナス通知表示用データへのポインタテーブル|
|`$AD6E`|data|ボーナス通知 "2000000" 表示用データ|
|`$AD77`|data|ボーナス通知 "80000" 表示用データ|
|`$AD7E`|data|ボーナス通知 "40000" 表示用データ|
|`$AD85`|data|ボーナス通知 "10000" 表示用データ|
|`$AD8C`|data|ボーナス通知 "4000" 表示用データ|
|`$AD92`|data|ボーナス通知 "1000" 表示用データ|
|`$AD98`|data|ボーナス通知 "500" 表示用データ|
|`$AD9D`|data|通知表示用データへのポインタテーブル|
|`$ADAF`|data|通知 "STAGE ?? START" 表示用データ|
|`$ADC2`|data|通知 "PAUSE" 表示用データ|
|`$ADCA`|data|通知 "GAME OVER" 表示用データ|
|`$ADD8`|data|通知 "ATTACK STAR BRAIN" 表示用データ|
|`$ADF0`|data|通知 "ATTACK BIG STAR BRAIN" 表示用データ|
|`$AE0C`|data|通知 "BONUS ???????" 表示用データ|
|`$AE17`|data|通知 "BRAIN ESCAPED" 表示用データ|
|`$AE29`|data|通知 "WARP NEXT STAGE" 表示用データ|
|`$AE3F`|data|通知 "COMPLETE WARP" 表示用データ|
|`$AE51`|data||
|`$AEA1`|code|次の VBLANK を待つルーチン|
|`$AEAC`|code|全スプライトを非表示にするルーチン|
|`$AEB7`|code|VRAM 全体をゼロクリアするルーチン|
|`$`|||
|`$`|||
|`$`|||
|`$`|||
|`$`|||
|`$B2D0`|code|タイトルシーン|
|`$`|||
|`$`|||
|`$`|||
|`$`|||
|`$`|||
|`$B690`|code|BGM再生ルーチン (NMI から呼ばれる)|
|`$B6EC`|code|BGM トラックデータを読み込んで処理するルーチン|
|`$B6FE`|code|BGM トラックデータ `0xFC..=0xFF` (制御用) の処理|
|`$B70E`|data|BGM トラックデータ `0xFF`, `0xFE`, `0xFD`, `0xFC` に対応するルーチンテーブル (RTS trick 用)|
|`$B716`|data|BGM 各曲に対応する `$4000`, `$4004` 設定値|
|`$B71F`|code|BGM トラックデータ `0x80..=0xEF` (音長設定) の処理|
|`$B740`|code|BGM トラックデータ `0`, `25..=0x7F` (発音/消音) の処理|
|`$B77C`|code|BGM 周波数タイマー値 0 を返すルーチン|
|`$B781`|code|BGM 周波数タイマー値計算ルーチン|
|`$B7AE`|code|BGM トラックデータ `0xFF` (BGM終了) の処理|
|`$B7B1`|code|BGM トラックデータ `0xFE` (BGM先頭に戻る) の処理|
|`$B7BE`|code|BGM トラックデータポインタ初期化ルーチン|
|`$B7D3`|code|BGM トラックデータ `0xFD` (BGMループ開始) の処理|
|`$B7E8`|code|BGM トラックデータ `0xFE` (BGMループ末尾) の処理|
|`$B7FC`|code|BGM トラックデータ読み込みルーチン|
|`$B809`|code|APU 初期化 (呼び出すと全チャンネル消音)|
|`$B82A`|code|効果音再生ルーチン (NMI から呼ばれる)|
|`$`|||
|`$`|||
|`$`|||
|`$`|||
|`$`|||
|`$BAF8`|code|バンク切り替え動作テストルーチン (CHR #0, #1 内の magic 文字列を比較し、一致しないことを確認)|
|`$BB29`|code|指定した CHR バンクからの magic 文字列読み取りを開始(空読みまで行う)|
|`$`|||
|`$`|||
|`$`|||
|`$`|||
|`$`|||
|`$BB8C`|data|BGM 各音階(矩形波 C2 から B2 まで)に対応する周波数タイマー値|
|`$BBA6`|data|BGM 各BGMに対応する[トラックデータ](@/music/index.md#track-data))(矩形波1, 矩形波2, 三角波)へのポインタ|
|`$BBE2`|data|BGM [トラックデータ](@/music/index.md#track-data) タイトル画面 矩形波1|
|`$BC1B`|data|BGM [トラックデータ](@/music/index.md#track-data) タイトル画面 矩形波2|
|`$BC45`|data|BGM [トラックデータ](@/music/index.md#track-data) タイトル画面 三角波|
|`$BC61`|data|BGM [トラックデータ](@/music/index.md#track-data) ラザロ戦 矩形波1|
|`$BC76`|data|BGM [トラックデータ](@/music/index.md#track-data) ラザロ戦 矩形波2/三角波|
|`$BCAE`|data|BGM [トラックデータ](@/music/index.md#track-data) スターブレイン撃破 矩形波1|
|`$BCDB`|data|BGM [トラックデータ](@/music/index.md#track-data) スターブレイン撃破 矩形波2|
|`$BD0C`|data|BGM [トラックデータ](@/music/index.md#track-data) スターブレイン撃破 三角波|
|`$BD31`|data|BGM [トラックデータ](@/music/index.md#track-data) ゲーム終了 矩形波1|
|`$BD76`|data|BGM [トラックデータ](@/music/index.md#track-data) ゲーム終了 矩形波2|
|`$BDAB`|data|BGM [トラックデータ](@/music/index.md#track-data) ゲーム終了 三角波|
|`$BDD3`|data|BGM [トラックデータ](@/music/index.md#track-data) スターブレイン戦 矩形波1|
|`$BE07`|data|BGM [トラックデータ](@/music/index.md#track-data) スターブレイン戦 矩形波2|
|`$BE3B`|data|BGM [トラックデータ](@/music/index.md#track-data) スターブレイン戦 三角波|
|`$BE79`|data|BGM [トラックデータ](@/music/index.md#track-data) 面イントロ (フルパワー未満) 矩形波1|
|`$BE92`|data|BGM [トラックデータ](@/music/index.md#track-data) 面イントロ (フルパワー未満) 矩形波2|
|`$BEC3`|data|BGM [トラックデータ](@/music/index.md#track-data) 面イントロ (フルパワー未満) 三角波|
|`$BEF5`|data|BGM [トラックデータ](@/music/index.md#track-data) 無音 矩形波1/矩形波2/三角波|
|`$BEF8`|data|BGM [トラックデータ](@/music/index.md#track-data) 面ループ (フルパワー未満) 矩形波1|
|`$BFAB`|data|BGM [トラックデータ](@/music/index.md#track-data) 面ループ (フルパワー未満) 矩形波2|
|`$C02D`|data|BGM [トラックデータ](@/music/index.md#track-data) 面ループ (フルパワー未満) 三角波|
|`$C0EB`|data|BGM [トラックデータ](@/music/index.md#track-data) 面イントロ (フルパワー) 矩形波1|
|`$C10A`|data|BGM [トラックデータ](@/music/index.md#track-data) 面イントロ (フルパワー) 矩形波2|
|`$C128`|data|BGM [トラックデータ](@/music/index.md#track-data) 面イントロ (フルパワー) 三角波|
|`$C141`|data|BGM [トラックデータ](@/music/index.md#track-data) 面ループ (フルパワー) 矩形波1|
|`$C1FE`|data|BGM [トラックデータ](@/music/index.md#track-data) 面ループ (フルパワー) 矩形波2|
|`$C2A0`|data|BGM [トラックデータ](@/music/index.md#track-data) 面ループ (フルパワー) 三角波|
|`$`|||
|`$`|||
|`$`|||
|`$`|||
|`$`|||
|`$D48D`|data|各面の[地形設定](@/ground-format/index.md#setting)|
|`$D50D`|data|地形パレットエントリ (4*43 Byte)|
|`$D5B9`|data|各面の地形の[特殊セルデータ](@/ground-format/index.md#special-cell)へのポインタテーブル|
|`$D5D9`|data|各面の地形の[圧縮データ](@/ground-format/index.md#compression)へのポインタテーブル|
|`$`|||
|`$`|||
|`$`|||
|`$`|||
|`$`|||
|`$FFFA`|data|割り込みベクタ|
